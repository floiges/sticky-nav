(function(t){function e(e){for(var n,c,a=e[0],r=e[1],l=e[2],d=0,h=[];d<a.length;d++)c=a[d],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&h.push(s[c][0]),s[c]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,a=1;a<i.length;a++){var r=i[a];0!==s[r]&&(n=!1)}n&&(o.splice(e--,1),t=c(c.s=i[0]))}return t}var n={},s={app:0},o=[];function c(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.m=t,c.c=n,c.d=function(t,e,i){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(i,n,function(e){return t[e]}.bind(null,n));return i},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/sticky-nav/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],r=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=r;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"150c":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"document",staticClass:"page"},[i("div",{staticClass:"container"},t._l(t.sections,(function(e){return i("div",{key:e.id,staticClass:"list-item",attrs:{"component-id":e.id,"component-type":e.type}},["list"===e.type?i("div",{staticClass:"item"},[t._v(" "+t._s(e.id)+" ")]):t._e(),"menu"===e.type?i("sticky-nav",{attrs:{menu:t.menu,options:t.stickyOptions}}):t._e()],1)})),0)])},o=[],c=i("84a2"),a=i.n(c),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sticky-nav-container",class:{"text-height":1===t.menu.menuType,"image-height":0===t.menu.menuType},style:"--text-color: "+t.menu.textColor+"; background: "+t.menu.bgColor+";"},[i("div",{class:{"sticky-nav-fixed":t.sticky&&t.enableFixed},style:"top: "+t.stickyOptions.stickyTop+"px; z-index: "+t.stickyOptions.zIndex+"; background: "+t.menu.bgColor+";"},[t.showButton?i("span",{ref:"showAllButton",staticClass:"stickyNav-expand",class:{expand:t.isShowAll},on:{click:t.expand}},[i("span",{staticClass:"sticky-nav-arrow"})]):t._e(),t.isShowAll?i("div",{staticClass:"sticky-nav-expand-topbar"},[t._v(t._s(t.stickyOptions.title))]):t._e(),i("div",{ref:"stickyNav",staticClass:"sticky-nav"},[i("div",{ref:"scrollView",staticClass:"scroll-view"},[i("ul",{staticClass:"sticky-nav-ul"},t._l(t.navs,(function(e,n){return i("li",{key:"normal-"+n,ref:"navItem",refInFor:!0,staticClass:"sticky-nav-item",class:{active:t.sectionToNavMap[t.activeIndex]===n,indicator:1===t.menu.menuType},on:{click:function(e){return t.change(n)}}},[0===t.menu.menuType?i("img",{staticClass:"sticky-nav-item-img",attrs:{src:e.img}}):t._e(),i("span",{staticClass:"sticky-nav-item-title"},[t._v(t._s(e.title||"导航"+(n+1)))])])})),0)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowAll,expression:"isShowAll"}],staticClass:"sticky-nav-expand-panel"},[i("ul",{staticClass:"sticky-nav-ul"},t._l(t.navs,(function(e,n){return i("li",{key:"panel-"+n,staticClass:"sticky-nav-item",class:{active:t.sectionToNavMap[t.activeIndex]===n},on:{click:function(e){return t.change(n)}}},[0===t.menu.menuType?i("img",{staticClass:"sticky-nav-item-img",attrs:{src:e.img}}):t._e(),i("span",{staticClass:"sticky-nav-item-title"},[t._v(t._s(e.title||"导航"+(n+1)))])])})),0)])])])},l=[],u=(i("c740"),i("a630"),i("fb6a"),i("3ca3"),i("22b5")),d={zIndex:1001,stickyTop:0,thresold:0,scrollAnimate:!0,title:"请选择分类"},h={props:{options:{type:Object},menu:{type:Object}},data:function(){return{stickyOptions:{},activeIndex:0,isShowAll:!1,translateX:0,sticky:!1,sectionToNavMap:{}}},computed:{navs:function(){return this.menu.list||[]},stickyNav:function(){return this.$refs.stickyNav},scrollView:function(){return this.$refs.scrollView},showButton:function(){return this.navs.length>=4},buttonWidth:function(){return this.showButton?this.$refs.showAllButton.offsetWidth+"px":0},enableFixed:function(){return"fixed"===this.menu.positionType}},watch:{"options.sectionElement":{handler:function(t){this.sectionElement=t;var e=Array.from(this.sectionElement.getElementsByClassName(this.stickyOptions.sectionSelector)),i=e.findIndex((function(t){var e=t.getAttribute("component-type");return"menu"===e}));this.sections=-1!==i?e.slice(i+1):e,this.createSectionNavMap()}},"options.scrollTop":{handler:function(t){this.scrollTop=t,this.scrollHandler()}},translateX:function(t,e){this.stickyOptions.scrollAnimate?this.tween(e,t):this.scrollView.scrollLeft=-t},activeIndex:function(t){var e=this;setTimeout((function(){e.centerTitleAtIndex(t)}),0),this.$emit("changed",t)},isShowAll:function(t){this.$emit("expand",t);var e=this.getOverlay();e&&(e.style.display=t?"block":"none")}},created:function(){this.stickyOptions=Object.assign({},d,this.options)},mounted:function(){var t=this.stickyOptions,e=t.thresold,i=t.stickyTop;this.stickyOptions.thresold=e+this.stickyNav.offsetHeight+i,this.showButton&&(this.createOverlay(),this.stickyNav.style.paddingRight=this.buttonWidth)},methods:{change:function(t){this.isShowAll=!1,this.scrollTo(t),this.$emit("click",t)},scrollTo:function(t){var e=this.navToSectionMap[t];if("undefined"===typeof e&&(e=-1),-1!==e){var i=this.getElementScrollTop(this.sections[e]);this.sectionElement.scrollTo(0,i-this.stickyOptions.thresold)}},centerTitleAtIndex:function(t){var e=this.sectionToNavMap[t];if("undefined"===typeof e&&(e=-1),-1!==e){var i=this.$refs.navItem[e],n=i.offsetLeft,s=i.offsetWidth,o=this.stickyNav.offsetWidth,c=this.buttonWidth,a=this.scrollView.scrollWidth-o+c;if(0!==a){var r=(o-s)/2,l=r-n;l>0&&(l=0),l<-a&&(l=-a),this.translateX=l}}},expand:function(){this.isShowAll=!this.isShowAll},scrollHandler:function(){if(this.enableFixed){var t=this.scrollTop,e=this.getElementScrollTop(this.$el);if(this.sections.length>0){t<e&&(this.activeIndex=0);var i=this.sections[this.sections.length-1];t>this.getElementScrollTop(i)+i.offsetHeight||t<e?this.sticky=!1:this.sticky=!0}for(var n=0;n<this.sections.length;n++){var s=this.sections[n],o=this.getElementScrollTop(s);o-this.stickyOptions.thresold<=t&&o+s.offsetHeight>t&&(this.activeIndex=n)}}},handleOverlayClick:function(){this.overlay.style.display="none",this.isShowAll=!1},tween:function(t,e){var i=function t(){u["a"].update()&&requestAnimationFrame(t)},n=this.scrollView;new u["a"].Tween({number:t}).to({number:e},100).onUpdate((function(t){n.scrollLeft=-t.number})).start(),i()},createOverlay:function(){var t=this;if(!this.getOverlay()){var e=document.createElement("div");e.className="sticky-nav-overlay",e.style="\n        background: rgba(0, 0, 0, 0.4);\n        position: fixed;\n        width: 100%;\n        left: 0;\n        top: 0;\n        height: 100%;\n        display: none;\n        z-index: 999;\n      ",e.addEventListener("touchstart",(function(){e.style.display="none",t.isShowAll=!1})),e.addEventListener("click",(function(){e.style.display="none",t.isShowAll=!1})),document.body.appendChild(e)}},getOverlay:function(){return document.getElementsByClassName("sticky-nav-overlay")[0]},createSectionNavMap:function(){var t=this;this.sectionToNavMap={},this.navToSectionMap={};for(var e=function(e){var i=t.sections[e],n=i.getAttribute("component-id");if(!n)return"continue";var s=t.navs.findIndex((function(t){var e=t.id;return e===n}));t.sectionToNavMap[e]=s,-1!==s&&(t.navToSectionMap[s]=e)},i=0;i<this.sections.length;i++)e(i)},getElementScrollTop:function(t){var e=0;while(void 0!==t.offsetParent&&null!==t.offsetParent)e+=t.offsetTop+(null!==t.clientTop?t.clientTop:0),t=t.offsetParent;return e}}},p=h,f=(i("ced4"),i("2877")),v=Object(f["a"])(p,r,l,!1,null,"30cb31a4",null),m=v.exports,y={name:"App",data:function(){return{sections:[{id:"1000000",type:"menu"},{id:"1000",type:"list"},{id:"1001",type:"list"},{id:"1002",type:"list"},{id:"1003",type:"list"},{id:"1004",type:"list"}],menu:{positionType:"fixed",menuType:1,textColor:"#333333",bgColor:"#ff8a8a",list:[{title:"导航1",id:"1000"},{title:"导航2",id:"1001"},{title:"导航3",id:"1002"},{title:"导航4",id:"1003"},{title:"导航5",id:"1004"}]},stickyOptions:{sectionElement:null,sectionSelector:"list-item",scrollAnimate:!0,stickyTop:-1,title:"切换楼层",scrollTop:0}}},mounted:function(){this.throttleScroll=a()(this.onScroll,100),this.$refs.document.addEventListener("scroll",this.throttleScroll),this.stickyOptions.sectionElement=this.$refs.document},beforeDestroy:function(){this.$refs.document.removeEventListener("scroll",this.throttleScroll)},methods:{onScroll:function(){this.stickyOptions.scrollTop=this.$refs.document.scrollTop}},components:{StickyNav:m}},g=y,k=(i("ae70"),Object(f["a"])(g,s,o,!1,null,"5ecabb86",null)),w=k.exports;i("7dd0a"),i("e8f7");n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(w)}}).$mount("#app")},7437:function(t,e,i){},"7dd0a":function(t,e,i){},ae70:function(t,e,i){"use strict";i("7437")},ced4:function(t,e,i){"use strict";i("150c")},e8f7:function(t,e,i){i("b0c0"),i("ac1f"),i("466d"),i("1276"),window.mobileUtil=function(t,e){var i=navigator.userAgent,n=/android|adr/gi.test(i),s=/iphone|ipod|ipad/gi.test(i)&&!n,c=n||s;return{isAndroid:n,isIos:s,isMobile:c,isNewsApp:/NewsApp\/[\d.]+/gi.test(i),isWeixin:/MicroMessenger/gi.test(i),isQQ:/QQ\/\d/gi.test(i),isYixin:/YiXin/gi.test(i),isWeibo:/Weibo/gi.test(i),isTXWeibo:/T(?:X|encent)MicroBlog/gi.test(i),tapEvent:c?"tap":"click",fixScreen:function(i){var n=e.querySelector('meta[name="viewport"]'),a=n?n.content:"",r=a.match(/initial-scale=([\d.]+)/),l=a.match(/width=([^,\s]+)/);if(n){if(c&&!r&&l&&"device-width"!=l[1]){var u=parseInt(l[1]),d=t.innerWidth||u,h=t.outerWidth||d,p=t.screen.width||d,f=t.screen.availWidth||d,v=t.innerHeight||u,m=t.outerHeight||v,y=t.screen.height||v,g=t.screen.availHeight||v,k=Math.min(d,h,p,f,v,m,y,g),w=k/u;w<1&&(n.content=a+","+C(w,i))}}else{var b,x=e.documentElement,T=x.dataset.mw||750,S=s?Math.min(t.devicePixelRatio,3):1,O=1/S;x.removeAttribute("data-mw"),x.dataset.dpr=S,n=e.createElement("meta"),n.name="viewport",n.content=C(O,i),x.firstElementChild.appendChild(n);var A=function(){var t=x.getBoundingClientRect().width;t/S>T&&(t=T*S);var e=t/10;x.style.fontSize=e+"px"};t.addEventListener("resize",(function(){clearTimeout(b),b=setTimeout(A,300)}),!1),t.addEventListener("pageshow",(function(t){t.persisted&&(clearTimeout(b),b=setTimeout(A,300))}),!1),A()}function C(t,e){return e&&e.usingPercentage&&(t=1),"initial-scale="+t+",maximum-scale="+t+",minimum-scale="+t+",user-scalable=no"}return o}}}(window,document),window.mobileUtil.fixScreen();var n=document.querySelector("html"),s=document.querySelector("meta[name=viewport]"),o=n.dataset.dpr,c=n.style.fontSize.split("px")[0];s.setAttribute("content","initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"),n.setAttribute("style","font-size: "+c/o+"px!important;")}});
//# sourceMappingURL=app.c283a418.js.map